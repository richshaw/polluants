smokers  <- c( 83, 90, 129, 70 )
patients <- c( 86, 93, 136, 82 )
prop.test(smokers, patients)
setwd("~/dev/polluant")
library("plyr")
library("ggplot2")
NEI <- readRDS("data//summarySCC_PM25.rds")
SCC <- readRDS("data//Source_Classification_Code.rds")
data.balLa <- subset(data,fips == 24510 | fips == 06037)
data <- join(NEI,SCC,by="SCC")
data.balLa <- subset(data,fips == 24510 | fips == 06037)
data.bal <- subset(data,fips == 24510)
View(tail(data.balLa))
View(head(data.balLa))
data.balLa <- subset(data,fips == "24510" | fips == "06037")
rm(data.bal)
data.balLa.onroad <- subset(data.balLa,Data.Category == "Onroad" )
summary.balLa.onroad <- ddply(data.bal.onroad, .(fips, year), summarise, totalEmissions = sum(Emissions, na.rm = TRUE)
)
summary.balLa.onroad <- ddply(data.balLa.onroad, .(fips, year), summarise, totalEmissions = sum(Emissions, na.rm = TRUE))
View(summary.balLa.onroad)
summary.balLA.onroad[["year"]] <- factor( summary.balLa.onroad[["year"]],
levels = unique(summary.balLa.onroad[["year"]]) )
summary.balLA.onroad[["year"]] <- factor( summary.balLa.onroad[["year"]], levels = unique(summary.balLa.onroad[["year"]]) )
summary.balLA.onroad[["year"]] <- factor( summary.balLa.onroad[["year"]],levels = unique(summary.balLa.onroad[["year"]]) )
summary.balLa.onroad
summary.balLa.onroad[["year"]] <- factor( summary.balLa.onroad[["year"]],levels = unique(summary.balLa.onroad[["year"]]) )
ggplot(data=summary.bal.onroad, aes(x=year, y=totalEmissions, group = 1)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore, Maryland")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group = 1)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore, Maryland")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore, Maryland")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore, Maryland")
rm(NEI)
rm(SCC)
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore, Maryland")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) + geom_line() + geom_point()
df <- data.frame(time = factor(c("Lunch","Dinner"), levels=c("Lunch","Dinner")),
total_bill = c(14.89, 17.23))
ggplot(data=df, aes(x=time, y=total_bill)) + geom_bar(stat="identity")
ggplot(data=df, aes(x=time, y=total_bill)) + geom_bar(stat="identity")
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
ggplot(data=df, aes(x=time, y=total_bill)) + geom_bar(stat="identity")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore, Maryland")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
scale_fill_hue(name="Location")
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county) +
scale_fill_discrete(name="Location",
breaks=c("06037", "24510",),
labels=c("LA county", "Baltimore City"))
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county) +
scale_fill_discrete(name="Location",breaks=c("06037", "24510"),labels=c("LA county", "Baltimore City"))
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)") +
scale_fill_discrete(name="Location",breaks=c("06037", "24510"),labels=c("LA county", "Baltimore City"))
names(summary.balLa.onroad)[names(summary.balLa.onroad) == 'fips'] <- 'location'
summary.balLa.onroad
summary.balLa.onroad[["location"]] <- factor( summary.balLa.onroad[["location"]],
levels = unique(summary.balLa.onroad[["location"]]),
labels = c("LA county","Baltimore City") )
summary.balLa.onroad
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=fips, colour=fips)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)") +
scale_fill_discrete(name="Location",breaks=c("06037", "24510"),labels=c("LA county", "Baltimore City"))
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=location, colour=location)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=location, colour=location)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)") +
scale_shape_discrete(name  = "Location")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=location, colour=location)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)") +
scale_colour_discrete(name  = "Location")
ggplot(data=summary.balLa.onroad, aes(x=year, y=totalEmissions, group=location, colour=location)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)") +
scale_colour_discrete(name  = "Location")
ddply(summary.balLa.onroad, .(location, year), mutate ,
yoy = c(NA, diff(totalEmissions)))
library("plyr", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
ddply(summary.balLa.onroad, .(location, year), mutate ,
yoy = c(NA, diff(totalEmissions)))
ddply(summary.balLa.onroad, .(location, year), mutate ,
yoy = c(NA, diff(totalEmissions)))
diff(1:10)
diff(summary.balLa.onroad$totalEmissions)
mutate(summary.balLa.onroad, yoy = diff(totalEmissions))
mutate(summary.balLa.onroad, yoy = c(NA, diff(totalEmissions)))
ddply(summary.balLa.onroad, .(location), transform, yoy = ((100 / totalEmissions[1]) * totalEmissions) - 100)
summary.balLa.yoy <- ddply(summary.balLa.onroad, .(location), transform, yoy = ((100 / totalEmissions[1]) * totalEmissions) - 100)
ggplot(data=summary.balLa.yoy, aes(x=year, y=yoy, group=location, colour=location)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (tons)") +
ggtitle("Total PM2.5 emissions per year from Motor Vehicles in Baltimore City & LA county)") +
scale_colour_discrete(name  = "Location")
ggplot(data=summary.balLa.yoy, aes(x=year, y=yoy, group=location, colour=location)) +
geom_line() +
geom_point() +
xlab("Year") +
ylab("Emissions (% change year on year)") +
ggtitle("% change in PM2.5 emissions year on year from Motor Vehicles in Baltimore City & LA county)") +
scale_colour_discrete(name  = "Location")
source("plot6.R")
summary.balLa.onroad
